<Window x:Class="MesTechStok.Desktop.Views.ImageMapWizard"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Görsel Eşleme Sihirbazı" Height="600" Width="900"
        WindowStartupLocation="CenterOwner">
    <Grid Margin="16">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Controls -->
        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,10">
            <TextBox x:Name="TxtFolder" Width="520" IsReadOnly="True" Margin="0,0,8,0"/>
            <Button Content="Klasör Seç" Width="110" Click="Browse_Click" Margin="0,0,8,0"/>
            <CheckBox x:Name="ChkMatchSku" Content="SKU ile eşle" IsChecked="True" Margin="8,0"/>
            <CheckBox x:Name="ChkMatchBarcode" Content="Barkod ile eşle" IsChecked="True" Margin="8,0"/>
            <CheckBox x:Name="ChkContains" Content="İçeriyorsa kabul et" ToolTip="Dosya adında SKU/Barkod geçiyorsa" Margin="8,0"/>
            <CheckBox x:Name="ChkOnlyMatched" Content="Yalnızca eşleşen" Margin="16,0,0,0" Checked="FilterToggles_Changed" Unchecked="FilterToggles_Changed"/>
            <CheckBox x:Name="ChkOnlyUnmatched" Content="Yalnızca eşleşmeyen" Margin="8,0,0,0" Checked="FilterToggles_Changed" Unchecked="FilterToggles_Changed"/>
            <Button Content="Önizleme" Width="110" Click="Scan_Click" Margin="12,0,0,0"/>
        </StackPanel>

        <!-- Preview grid -->
        <DataGrid Grid.Row="1" x:Name="PreviewGrid" AutoGenerateColumns="False" IsReadOnly="True">
            <DataGrid.Columns>
                <DataGridTextColumn Header="Dosya" Binding="{Binding FileName}" Width="*"/>
                <DataGridTextColumn Header="Eşleşme" Binding="{Binding MatchedBy}" Width="120"/>
                <DataGridTextColumn Header="Barkod" Binding="{Binding Barcode}" Width="140"/>
                <DataGridTextColumn Header="SKU" Binding="{Binding Sku}" Width="160"/>
                <DataGridTextColumn Header="Ürün" Binding="{Binding ProductName}" Width="220"/>
                <DataGridTextColumn Header="Durum" Binding="{Binding Status}" Width="140"/>
            </DataGrid.Columns>
        </DataGrid>

        <!-- Footer -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,10,0,0">
            <TextBlock x:Name="SummaryText" VerticalAlignment="Center" Margin="0,0,12,0"/>
            <Button Content="Raporu Dışa Aktar (CSV)" Click="Export_Click" Margin="0,0,8,0"/>
            <Button Content="İptal" Click="Cancel_Click" Width="100" Margin="0,0,8,0"/>
            <Button x:Name="BtnApply" Content="Eşleştir" Click="Apply_Click" Width="120"/>
        </StackPanel>

        <!-- Busy overlay -->
        <Border x:Name="BusyOverlay" Background="#66000000" Visibility="Collapsed">
            <Border HorizontalAlignment="Center" VerticalAlignment="Center" Background="#FFFFFFFF" Padding="16" CornerRadius="8">
                <StackPanel>
                    <TextBlock x:Name="BusyText" Text="İşlem yapılıyor…" FontSize="14" Margin="0,0,0,8" HorizontalAlignment="Center"/>
                    <ProgressBar IsIndeterminate="True" Width="220" Height="6"/>
                </StackPanel>
            </Border>
        </Border>
    </Grid>
</Window>

