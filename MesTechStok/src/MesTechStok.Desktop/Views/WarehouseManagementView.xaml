<UserControl x:Class="MesTechStok.Desktop.Views.WarehouseManagementView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:vm="clr-namespace:MesTechStok.Desktop.ViewModels"
             mc:Ignorable="d" 
             d:DesignHeight="800" d:DesignWidth="1400">
    
    <UserControl.DataContext>
        <vm:WarehouseManagementViewModel/>
    </UserControl.DataContext>
    
    <Grid Background="#F5F5F5">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        
        <!-- Header Section -->
        <Border Grid.Row="0" Background="White" CornerRadius="12" Padding="24" Margin="24,24,24,16">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <StackPanel Grid.Column="0">
                    <TextBlock Text="ðŸ¢ DEPO YÃ–NETÄ°MÄ°" 
                               FontSize="24" FontWeight="Bold" 
                               Foreground="#1976D2" Margin="0,0,0,8"/>
                    <TextBlock Text="Depo bÃ¶lÃ¼mleri, raflar, gÃ¶zler ve konumlarÄ± yÃ¶netin" 
                               FontSize="16" Foreground="#666" Margin="0,0,0,16"/>
                    <TextBlock Text="HiyerarÅŸik yapÄ± ile depo organizasyonu, CRUD iÅŸlemleri ve detaylÄ± yÃ¶netim" 
                               FontSize="14" Foreground="#888"/>
                </StackPanel>
                
                <StackPanel Grid.Column="1" VerticalAlignment="Center">
                    <TextBlock Text="ðŸ“Š Depo Durumu" FontSize="14" FontWeight="SemiBold" Margin="0,0,0,8"/>
                    <Border Background="#4CAF50" CornerRadius="8" Padding="12,6">
                        <TextBlock Text="âœ… AKTÄ°F" Foreground="White" FontWeight="Bold"/>
                    </Border>
                    
                    <!-- CRUD ButonlarÄ± -->
                    <StackPanel Orientation="Horizontal" Margin="0,16,0,0">
                        <Button Content="ðŸ”„ Yenile" Command="{Binding RefreshWarehouseStructureCommand}" 
                                Style="{StaticResource ModernButtonStyle}" Margin="0,0,8,0"/>
                        <Button Content="ðŸ—ï¸ BÃ¶lÃ¼m Ekle" Command="{Binding AddZoneCommand}" 
                                Style="{StaticResource ModernButtonStyle}" Margin="0,0,8,0"/>
                        <Button Content="ðŸ“¦ Raf Ekle" Command="{Binding AddRackCommand}" 
                                Style="{StaticResource ModernButtonStyle}" Margin="0,0,8,0"/>
                        <Button Content="ðŸ“š Seviye Ekle" Command="{Binding AddShelfCommand}" 
                                Style="{StaticResource ModernButtonStyle}" Margin="0,0,8,0"/>
                        <Button Content="ðŸ—ƒï¸ GÃ¶z Ekle" Command="{Binding AddBinCommand}" 
                                Style="{StaticResource ModernButtonStyle}"/>
                    </StackPanel>
                </StackPanel>
            </Grid>
        </Border>
        
        <!-- Main Content -->
        <Grid Grid.Row="1" Margin="24,0,24,24">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="400"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            
            <!-- Left Panel - TreeView -->
            <Border Grid.Column="0" Background="White" CornerRadius="12" Padding="20" Margin="0,0,12,0">
                <StackPanel>
                    <TextBlock Text="ðŸ” Arama" FontSize="14" FontWeight="SemiBold" Margin="0,0,0,8"/>
                    <TextBox Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}" 
                             Padding="12,8" BorderThickness="1" BorderBrush="#E0E0E0" 
                             Margin="0,0,0,16" ToolTip="Depo yapÄ±sÄ±nda arama yapÄ±n..."/>
                    
                    <TextBlock Text="ðŸ“‹ Depo YapÄ±sÄ±" FontSize="16" FontWeight="Bold" Margin="0,0,0,16"/>
                    <TreeView ItemsSource="{Binding WarehouseStructure}" Height="400" 
                              SelectedItemChanged="WarehouseTreeView_SelectedItemChanged">
                        <TreeView.ItemTemplate>
                            <HierarchicalDataTemplate ItemsSource="{Binding Children}">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="{Binding Icon}" FontSize="16" Margin="0,0,8,0"/>
                                    <TextBlock Text="{Binding Name}" FontWeight="SemiBold"/>
                                    <TextBlock Text=" (" Foreground="#666"/>
                                    <TextBlock Text="{Binding Code}" Foreground="#666"/>
                                    <TextBlock Text=")" Foreground="#666"/>
                                </StackPanel>
                            </HierarchicalDataTemplate>
                        </TreeView.ItemTemplate>
                    </TreeView>
                </StackPanel>
            </Border>
            
            <!-- Right Panel - Details -->
            <Border Grid.Column="1" Background="White" CornerRadius="12" Padding="24">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    
                    <!-- Header -->
                    <TextBlock Grid.Row="0" Text="ðŸ“‹ Detaylar" FontSize="20" FontWeight="Bold" Margin="0,0,0,16"/>
                    
                    <!-- Content -->
                    <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
                        <StackPanel>
                            <!-- Status Message -->
                            <Border Background="#E3F2FD" CornerRadius="8" Padding="16" Margin="0,0,0,16">
                                <TextBlock Text="{Binding StatusMessage}" FontSize="14" Foreground="#1976D2"/>
                            </Border>
                            
                            <!-- Loading Indicator -->
                            <Border Background="#FFF3E0" CornerRadius="8" Padding="16" Margin="0,0,0,16" 
                                    Visibility="{Binding IsLoading, Converter={StaticResource BooleanToVisibilityConverter}}">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="â³" FontSize="16" Margin="0,0,8,0"/>
                                    <TextBlock Text="Depo yapÄ±sÄ± yÃ¼kleniyor..." FontSize="14" Foreground="#F57C00"/>
                                </StackPanel>
                            </Border>
                            
                            <!-- No Selection -->
                            <Border Background="#F5F5F5" CornerRadius="8" Padding="24" 
                                    Visibility="{Binding NoSelectionVisibility, Converter={StaticResource BooleanToVisibilityConverter}}">
                                <StackPanel HorizontalAlignment="Center">
                                    <TextBlock Text="ðŸ”" FontSize="48" HorizontalAlignment="Center" Margin="0,0,0,16"/>
                                    <TextBlock Text="Sol panelden bir Ã¶ÄŸe seÃ§in" FontSize="16" FontWeight="SemiBold" 
                                               HorizontalAlignment="Center" Margin="0,0,0,8"/>
                                    <TextBlock Text="SeÃ§ilen Ã¶ÄŸenin detaylarÄ± burada gÃ¶rÃ¼ntÃ¼lenecek" 
                                               FontSize="14" Foreground="#666" HorizontalAlignment="Center"/>
                                </StackPanel>
                            </Border>
                            
                            <!-- Zone Details -->
                            <Border Background="#E8F5E8" CornerRadius="8" Padding="16" Margin="0,0,0,16" 
                                    Visibility="{Binding ZoneDetailsVisibility, Converter={StaticResource BooleanToVisibilityConverter}}">
                                <StackPanel>
                                    <TextBlock Text="ðŸ—ï¸ BÃ–LÃœM DETAYLARI" FontSize="16" FontWeight="Bold" 
                                               Foreground="#2E7D32" Margin="0,0,0,12"/>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                        </Grid.RowDefinitions>
                                        
                                        <TextBlock Grid.Row="0" Grid.Column="0" Text="Ad:" FontWeight="SemiBold" Margin="0,0,16,8"/>
                                        <TextBlock Grid.Row="0" Grid.Column="1" Text="{Binding SelectedZone.Name}" Margin="0,0,0,8"/>
                                        
                                        <TextBlock Grid.Row="1" Grid.Column="0" Text="Kod:" FontWeight="SemiBold" Margin="0,0,16,8"/>
                                        <TextBlock Grid.Row="1" Grid.Column="1" Text="{Binding SelectedZone.Code}" Margin="0,0,0,8"/>
                                        
                                        <TextBlock Grid.Row="2" Grid.Column="0" Text="Durum:" FontWeight="SemiBold" Margin="0,0,16,8"/>
                                        <TextBlock Grid.Row="2" Grid.Column="1" Text="{Binding SelectedZone.IsActive, Converter={StaticResource BooleanToActiveTextConverter}}" Margin="0,0,0,8"/>
                                    </Grid>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                    </ScrollViewer>
                    
                    <!-- Action Buttons -->
                    <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,16,0,0">
                        <Button Content="âœï¸ DÃ¼zenle" Command="{Binding EditCommand}" 
                                Style="{StaticResource ModernButtonStyle}" Margin="0,0,8,0"
                                Visibility="{Binding IsEditing, Converter={StaticResource InverseBooleanToVisibilityConverter}}"/>
                        <Button Content="ðŸ’¾ Kaydet" Command="{Binding SaveChangesCommand}" 
                                Style="{StaticResource ModernButtonStyle}" Margin="0,0,8,0"
                                Visibility="{Binding IsEditing, Converter={StaticResource BooleanToVisibilityConverter}}"/>
                        <Button Content="âŒ Ä°ptal" Command="{Binding CancelEditCommand}" 
                                Style="{StaticResource ModernButtonStyle}"
                                Visibility="{Binding IsEditing, Converter={StaticResource BooleanToVisibilityConverter}}"/>
                    </StackPanel>
                </Grid>
            </Border>
        </Grid>
    </Grid>
</UserControl>
